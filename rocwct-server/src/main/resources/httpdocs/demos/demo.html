<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<title>RocWCT EasyTouch</title>
	<script src="/js/rocwct-bundle.js" type="module"></script>
	<style type="text/css">
		body {
			overflow: hidden;
			margin: 0px;			
		}

		iframe {
			width: 100%;
			height: 450px;
			overflow: hidden;
			border: none;
		}

		table {
			border-top:solid 1px #CCCCCC;
			position: absolute;
			bottom:0px;
			width: 100%;
			padding: 15px 0px;
		}

		td {
			text-align: center;
		}


		/* The Modal (background) */
		.modal {
			display: none;
			/* Hidden by default */
			position: fixed;
			/* Stay in place */
			z-index: 1;
			/* Sit on top */
			left: 0;
			top: 0;
			width: 100%;
			/* Full width */
			height: 100%;
			/* Full height */
			overflow: auto;
			/* Enable scroll if needed */
			background-color: rgb(0, 0, 0);
			/* Fallback color */
			background-color: rgba(0, 0, 0, 0.4);
			/* Black w/ opacity */
		}

		/* Modal Content/Box */
		.modal-content {
			background-color: #fefefe;
			margin: auto;
			/* 15% from the top and centered */
			margin-top: 15px;
			padding: 20px;
			border: 1px solid #888;
			width: 250px;
			/* Could be more or less, depending on screen size */
		}

		/* The Close Button */
		.close {
			color: #aaa;
			float: right;
			font-size: 28px;
			font-weight: bold;
		}

		.close:hover,
		.close:focus {
			color: black;
			text-decoration: none;
			cursor: pointer;
		}
	</style>
	<script>
		document.addEventListener("DOMContentLoaded", function (event) {
			// Get the modal
			var modal = document.getElementById("myModal");

			// Get the button that opens the modal
			var btn = document.getElementById("myBtn");

			// When the user clicks on the button, open the modal 
			btn.onclick = function () {
				modal.style.display = "block";
			}

			// When the user clicks anywhere outside of the modal, close it
			window.onclick = function (event) {
				if (event.target == modal) {
					modal.style.display = "none";
				}
			}

			document.getElementById("chooser").addEventListener("onLocoChange", (e) => {
				modal.style.display = "none";
				var lococontrols = document.getElementsByClassName("lococontrol");
				for (var i = 0; i < lococontrols.length; i++) {
					lococontrols.item(i).setAttribute('loco-id', e.detail.locoid);
				}
			});

			let rocweburl = new URL(window.location).searchParams.get("rocweb");
			if(!rocweburl) {
				rocweburl = "http://localhost:8088";
			}
			document.getElementById("rocwebiframe").setAttribute("src",rocweburl);
		});		
	</script>
</head>

<body>
	<iframe id="rocwebiframe" src="" scrolling="no">
	</iframe>
	<table>
		<tr>
			<td style="height:100px;width:50px;padding-left: 10px;">
				<loco-direction class="lococontrol" direction="backward"></loco-direction>
			</td>
			<td style="height:100px;width:200px;">
				<loco-display class="lococontrol" id="myBtn" style="cursor: pointer"></loco-display>
			</td>
			<td style="height:100px;width:50px;">
				<loco-direction class="lococontrol" direction="forward"></loco-direction>
			</td>
			<td style="padding-left:40px;padding-right:30px;">
				<loco-throttle class="lococontrol"></loco-throttle>
			</td>
			<td style="height:100px;width:50px;padding-right:30px;">
				<loco-function class="lococontrol" fn="f0" show-label="false"></loco-function>
			</td>
			<td style="height:100px;width:50px;padding-right:30px;">
				<loco-auto-switch class="lococontrol" direction="forward"></loco-auto-switch>
			</td>
		</tr>
	</table>
	<div id="myModal" class="modal">
		<div class="modal-content">
			<p>
				<loco-chooser id="chooser"></loco-chooser>
			</p>
		</div>
	</div>

</body>

</html>